(function(){function u(n){var i=validate(n,t,{fullMessages:!1});f(n,i||{});i||s()}function f(n,t){document.querySelector(".stepper-active").classList.remove("stepper-invalid");_.each(n.querySelector(".stepper-active").querySelectorAll("input[required], select[required], input[validation]"),function(n){i(n,t&&t[n.name])})}function i(n,t){var i=r(n.parentNode,"input-group");i!=null&&(messages=i.querySelector(".invalid-tooltip"),e(i,n),t?_.each(t,function(t){o(i,n,messages,t)}):n.hasAttribute("validation")?(n.classList.remove("is-invalid"),n.classList.add("is-valid")):(i.querySelector("input").classList.remove("is-invalid"),i.querySelector("input").classList.add("is-valid")))}function r(n,t){return!n||n==document?null:n.classList.contains(t)?n:r(n.parentNode,t)}function e(n,t){t.hasAttribute("validation")?(t.classList.remove("is-invalid"),t.classList.remove("is-valid")):(n.querySelector("input").classList.remove("is-invalid"),n.querySelector("input").classList.remove("is-valid"))}function o(n,t){document.querySelector(".stepper-active").classList.add("stepper-invalid");t.hasAttribute("validation")?t.classList.add("is-invalid"):n.querySelector("input").classList.add("is-invalid")}function s(){var n=$("form#main").serialize();$.ajax({type:"POST",url:window.location.href,data:n,success:function(n){window.location.href=domainUrl+"/Posts/Submit/"+n}})}const n=JSON.parse(textLocalised);$(function(){var r=document.querySelector("form#main"),f,n;for(r.addEventListener("submit",function(n){n.preventDefault();u(r)}),f=document.querySelectorAll("input, textarea, select"),n=0;n<f.length;++n)f.item(n).addEventListener("change",function(){var n=validate(r,t)||{};i(this,n[this.name])});$("#selectType").change(function(){$.ajax({url:domainUrl+"/api/Types/"+$(this).find(":selected").val(),method:"GET",dataType:"text"}).done(function(n){var t=JSON.parse(n);$("#selectSubType").empty();$("#selectSubType").append('<option value=""><\/option>');$.each(t,function(n,t){var i=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");$("#selectSubType").append('<option value="'+t.Value+'">'+t.Text+"<\/option>")});$("#selectSubType").parent().find("input").val("").removeAttr("readonly").prop("required",!0)}).fail(function(){})});$("#selectParentArea").change(function(){$.ajax({url:domainUrl+"/api/GetAreas/"+$(this).val(),method:"GET",dataType:"text"}).done(function(n){var t=JSON.parse(n);$("#selectArea").empty();$("#selectArea").append('<option value=""><\/option>');$.each(t,function(n,t){$("#selectArea").append('<option value="'+t.Value+'">'+t.Text+"<\/option>")});$("#selectArea").parent().find("input").val("").removeAttr("readonly").prop("required",!0)}).fail(function(){})});$("#selectType").change();$("#selectParentArea").change()});var t=t={"Post.SaleCategory":{presence:!0},"Post.TypeId":{presence:!0},"Post.SubTypeId":{presence:!0},"Post.PriceTotal":{presence:!1,length:{minimum:3,maximum:20,message:n.moreThan100},format:{pattern:"[0-9]+",flags:"i",message:n.onlyInteger}},"Post.Area":{presence:!0},"Post.SubAreaId":{presence:!0},"Post.Address":{presence:!1,length:{minimum:3,message:n.minimumThreeCharacters}},"Post.PostalCode":{presence:!1,format:{pattern:"\\d{5}",message:n.maximumCharacters5}}}})();