(function(){function f(n){var i=validate(n,t,{fullMessages:!1});e(n,i||{});i||h()}function e(n,t){_.each(n.querySelectorAll("input[name], select[name]"),function(n){r(n,t&&t[n.name])})}function r(n,t){var i=u(n.parentNode,"form-group");i!=null&&(messages=i.querySelector(".messages"),o(i),t?(i.classList.add("has-error"),_.each(t,function(n){s(messages,n)})):i.classList.add("has-success"))}function u(n,t){return!n||n==document?null:n.classList.contains(t)?n:u(n.parentNode,t)}function o(n){n.classList.remove("has-error");n.classList.remove("has-success");_.each(n.querySelectorAll(".help-block.error"),function(n){n.parentNode.removeChild(n)})}function s(n,t){var i=document.createElement("p");i.classList.add("help-block");i.classList.add("error");i.classList.add("text-danger");i.innerText=t;n.appendChild(i)}function h(){var n=$("form#main").serialize();$.ajax({type:"POST",url:window.location.href,data:n,success:function(n){window.location.href=domainUrl+"/Posts/Submit/"+n}})}const n=JSON.parse(textLocalised);$(function(){var o,i,u,s,e;validate.validators.presence.options={message:function(){return n.obligatory}};o=$(".valueSpan");i=$("#Post_PriceTotal");o.html(i.val());i.on("input change",()=>{o.html(i.val())});for(u=document.querySelector("form#main"),u.addEventListener("submit",function(n){n.preventDefault();f(u)}),s=document.querySelectorAll("input, textarea, select"),e=0;e<s.length;++e)s.item(e).addEventListener("change",function(){var n=validate(u,t)||{};r(this,n[this.name])});$("#selectType").change(function(){$.ajax({url:domainUrl+"/api/Types/"+$(this).find(":selected").val(),method:"GET",dataType:"text"}).done(function(n){var t=JSON.parse(n);$("#selectSubType").materialSelect("destroy");$("#selectSubType").empty();$("#selectSubType").append('<option value=""><\/option>');$.each(t,function(n,t){var i=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");$("#selectSubType").append('<option value="'+t.Value+'">'+t.Text+"<\/option>")});$("#selectSubType").materialSelect();$("#selectSubType").parent().find("input").val("").removeAttr("readonly").prop("required",!0)}).fail(function(){})});$("#selectParentArea").change(function(){$.ajax({url:domainUrl+"/api/GetAreas/"+$(this).val(),method:"GET",dataType:"text"}).done(function(n){var t=JSON.parse(n);$("#selectArea").materialSelect("destroy");$("#selectArea").empty();$("#selectArea").append('<option value=""><\/option>');$.each(t,function(n,t){$("#selectArea").append('<option value="'+t.Value+'">'+t.Text+"<\/option>")});$("#selectArea").materialSelect();$("#selectArea").parent().find("input").val("").removeAttr("readonly").prop("required",!0)}).fail(function(){})});$("#selectType").change();$("#selectParentArea").change()});var t=t={"Post.SaleCategory":{presence:!0},"Post.TypeId":{presence:!0},"Post.SubTypeId":{presence:!0},"Post.PriceTotal":{presence:!1,length:{minimum:3,maximum:20,message:n.moreThan100},format:{pattern:"[0-9]+",flags:"i",message:n.onlyInteger}},"Post.Area":{presence:!0},"Post.SubAreaId":{presence:!0},"Post.Address":{presence:!1,length:{minimum:3,message:n.minimumThreeCharacters}},"Post.PostalCode":{presence:!1,format:{pattern:"\\d{5}",message:n.maximumCharacters5}}};validate.extend(validate.validators.datetime,{parse:function(n){return+moment.utc(n)},format:function(n,t){var i=t.dateOnly?"YYYY-MM-DD":"YYYY-MM-DD hh:mm:ss";return moment.utc(n).format(i)}})})();