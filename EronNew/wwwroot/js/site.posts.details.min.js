(function(){function n(n,t){return`
<td><button type="button" class="btn btn-info" data-mdb-toggle="modal" data-mdb-target="#modalContact">
<i class="fas fa-phone ms-2 fa-1x">   <strong>${t}</strong>  </i></button></td> 
<td>
<button type="button" class="btn btn-info" data-mdb-toggle="modal" data-mdb-target="#modalContact">
    Email<i class="fas fa-paper-plane ms-2 fa-1x"></i>
</button>
</td>`}function t(n){var t=JSON.parse(textLocalised),i="";return(n.Category="Sale")?i=t.sale:(n.Category="Rent")?i=t.rent:(n.Category="Demand")&&(i=t.demand),`
<div class="col-12 p-0 h-100" style="width:200px;">
    <div class="view overlay" style="min-width:160;min-height:100;">
        <img class="card-img-top rounded-0" src="${n.UrlImage}" alt="Card image cap">
        <a href="/Posts/Details/${n.id}">
            <div class="mask rgba-white-slight"></div>
        </a>
    </div>
    <div class="ml-1 mr-1">
        <a>
            ${n.Bathroom||""}  <i class="fas fa-bath"></i>  
            ${n.Bedroom||""}  <i class="fas fa-bed"></i>  
            ${n.ConstructionYear||""}  <i class="fas fa-home"></i>  
        </a>
    </div>
</div>  `}$(function(){function h(n,t){function h(n){if(n.la!=undefined)return n}function c(n){var t,i;infoBubbleCloseFlag=!0;n.target.style.opacity=.6;var c=r.screenToGeo(n.layerX,n.layerY),s=300,f,e=r.getObjects().filter(h),o;for(t=0;t<e.length;t+=1)f=e[t].getGeometry().distance(c),f<s&&(s=f,o=e[t]);i=new H.ui.InfoBubble(o.getGeometry(),{content:o.getData()});i.addEventListener("pointerup",function(){infoBubbleCloseFlag=!0});i.addEventListener("tap",function(){infoBubbleCloseFlag=!0});u.addBubble(i);i.open();infoBubbleCloseFlag=!1}function f(n){var t;infoBubbleCloseFlag=!0;n.target.style.opacity=.6;var o=r.screenToGeo(n.layerX,n.layerY),f=300,i,u=r.getObjects().filter(h),e;for(t=0;t<u.length;t+=1)i=u[t].getGeometry().distance(o),i<f&&(f=i,e=u[t]);var s=e.getData(),c=$(s).find("div.view > a"),l=c[0].href;window.location.href=l}function l(n){n.target.style.opacity=1;var t=u.getBubbles();for(i=0;i<t.length;i+=1)u.removeBubble(t[i])}var e=document.createElement("div"),o=document.createElement("div"),a,s;e.className="eronMarker";o.className="eronIcon";e.appendChild(o);o.innerHTML="1";a=new H.map.DomIcon(e,{onAttach:function(n){n.addEventListener("tap",f);n.addEventListener("pointerup",f);n.addEventListener("mouseover",c);n.addEventListener("mouseout",l)},onDetach:function(n){n.addEventListener("tap",f);n.addEventListener("pointerup",f);n.removeEventListener("mouseover",c);n.removeEventListener("mouseout",l)}});s=new H.map.DomMarker(n,{icon:a});s.setData(t);r.addObject(s)}var f=new H.service.Platform({apikey:"QgHR1cmAgWieJND3aw1CLqa_DzY3OtGjMsx4JVTvoco"}),e=f.createDefaultLayers(),r=new H.Map(document.getElementById("MapBox"),e.vector.normal.map,{center:{lat:37.939283,lng:23.654527},zoom:11,pixelRatio:window.devicePixelRatio||1}),c=f.getSearchService(),l,u,o,s;window.addEventListener("resize",()=>r.getViewPort().resize());l=new H.mapevents.Behavior(new H.mapevents.MapEvents(r));u=H.ui.UI.createDefault(r,e);postModel.Address!=""&&postModel.NumOfAddress!=""&&postModel.PostalCode!=""&&c.geocode({q:`${postModel.Address} ${postModel.NumOfAddress} ${postModel.PostalCode}`},n=>{n.items.forEach(n=>{r.setCenter(n.position),r.setZoom(14),o=n.position,h(o,t(postModel))})},alert);$("form#main").on("submit",function(n){var t=$(this).serialize();$.ajax({type:"POST",url:domainUrl+"/Posts/Details/ContactUs/"+postModel.OwnerId+"?postId="+postModel.id,data:t,success:function(){}});n.preventDefault()});$("form#notesForm").on("submit",function(n){n.preventDefault();var t=$(this).serialize();$.ajax({type:"POST",url:domainUrl+"/Posts/Details/SaveNotes/"+postModel.id,data:t}).done(function(){}).fail(function(n){n.status==401&&(window.location.href=domainUrl+"/Identity/Account/Login?ReturnUrl=%2FPosts%2FDetails%2F"+postModel.id+"%23SaveNotes_"+t)})});if($("#getContactInfo").click(function(t){var i=$(this).data("postid");$.ajax({url:domainUrl+"/Posts/Details/ShowPhones/"+i,method:"GET",dataType:"text"}).done(function(){$("#ContactInfo").empty();$("#ContactInfo").append(n(postTile,PostObject))}).fail(function(n){n.status==401&&(window.location.href=domainUrl+"/Identity/Account/Login?ReturnUrl=%2FPosts%2FDetails%2F"+i+"%23ContactInfo")});t.preventDefault()}),$("#printClick").click(function(){window.print()}),window.location.hash)switch(window.location.hash.split("_")[0]){case"#WishList":$(".details-heart").hasClass("details-wish")&&$(".details-heart").click();break;case"#ContactInfo":$("#ContactInfo").empty();$("#ContactInfo").append(n(postTile,PostObject));break;case"#SaveNotes":$("#centralModalNotes").on("shown.bs.modal",function(){$("#form107").focus();$("#saveNotes").click()});$("#centralModalNotes").modal("show");s=decodeURI(window.location.hash.split("_")[1].replace("notes=",""));$("#form107").html(s)}})})();