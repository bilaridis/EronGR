(function(){function r(n,t){var r=validate(n,i,{fullMessages:!1});return f(n,r||{}),r||t&&s(),r}function f(n,t){_.each(n.querySelectorAll("input[required], select[required], input[validation], textarea[required]"),function(n){u(n,t&&t[n.name])})}function u(n,i){var r=t(n.parentNode,"input-group");r!=null&&(messages=r.querySelector(".invalid-tooltip"),e(r,n),i?_.each(i,function(t){o(r,n,messages,t)}):i!=undefined&&(n.hasAttribute("validation")?(n.classList.remove("is-invalid"),n.classList.add("is-valid")):(r.querySelector("input").classList.remove("is-invalid"),r.querySelector("input").classList.add("is-valid"))))}function t(n,i){return!n||n==document?null:n.classList.contains(i)?n:t(n.parentNode,i)}function e(n,i){t(i.parentNode,"stepper-step").classList.remove("stepper-invalid");i.hasAttribute("validation")?(i.classList.remove("is-invalid"),i.classList.remove("is-valid")):(n.querySelector("input").classList.remove("is-invalid"),n.querySelector("input").classList.remove("is-valid"))}function o(n,i){t(i.parentNode,"stepper-step").classList.add("stepper-invalid");i.hasAttribute("validation")?i.classList.add("is-invalid"):n.querySelector("input").classList.add("is-invalid")}function s(){var n=$("form#main").serialize();$.ajax({type:"POST",url:window.location.href,data:n,success:function(){window.location.href=domainUrl+"/Administration/#1"},failed:function(){window.location.href=domainUrl+"/Administration/#2"}});window.location.href=domainUrl+"/Administration/#3"}const n=JSON.parse(textLocalised);$(function(){function s(){$.ajax({url:domainUrl+"/api/GetAreas/0",method:"GET",dataType:"text"}).done(function(n){var i=JSON.parse(n);$("#selectParentArea").empty();$.each(i,function(n,i){var r=i.Value==t.Area?"selected":"";$("#selectParentArea").append('<option value="'+i.Value+'" '+r+">"+i.Text+"<\/option>")})}).fail(function(){})}function h(){var n=JSON.parse(PostObject);$.ajax({url:domainUrl+"/api/GetAreas/"+n.Area,method:"GET",dataType:"text"}).done(function(t){var i=JSON.parse(t);$("#selectArea").empty();$.each(i,function(t,i){var r=i.Value==n.SubAreaId?"selected":"";$("#selectArea").append('<option value="'+i.Value+'" '+r+">"+i.Text+"<\/option>")})}).fail(function(){})}var e=document.querySelectorAll("input[required], select[required], input[validation], textarea[required]"),f=document.querySelector("form#main"),n,o,t;for(document.querySelector(".stepper .stepper-step").addEventListener("onChangeStep.mdb.stepper",()=>{r(f,!1)}),n=0;n<e.length;++n)e.item(n).addEventListener("change",function(){var n=validate(f,i)||{};u(this,n[this.name])});$(".submitForm").on("click",function(n){n.preventDefault();r(f,!0)});$("#uploader").length>0&&(o=new qq.FineUploader({element:document.getElementById("uploader"),request:{endpoint:"/Posts/Submit/Upload/"+$("#Post_id").val()},validation:{allowedExtensions:["jpeg","jpg","png"],itemLimit:21,sizeLimit:5242880},session:{endpoint:"/Posts/Submit/GetUploads/"+$("#Post_id").val()},deleteFile:{enabled:!0,forceConfirm:!0,endpoint:"/Posts/Submit/DeletePhoto"},autoUpload:!0,debug:!1}));$(`label[data-value="${$("#Energy").val()}"]`).addClass("btn-outline-info");$(".efficiency").click(function(){$(".energyEfficiency").find("label").removeClass("btn-outline-info");$("#Energy").val($(this).data("value"));$(this).addClass("btn-outline-info")});$("#selectType").change(function(){var n=JSON.parse(PostObject);$.ajax({url:domainUrl+"/api/Types/"+$(this).find(":selected").val(),method:"GET",dataType:"text"}).done(function(t){var i=JSON.parse(t);$("#selectSubType").empty();$("#selectSubType").append('<option value=""><\/option>');$.each(i,function(t,i){var r=i.Value==n.SubTypeId?"selected":"";$("#selectSubType").append('<option value="'+i.Value+'" '+r+">"+i.Text+"<\/option>")})}).fail(function(){})});$("#selectParentArea").change(function(){$.ajax({url:domainUrl+"/api/GetAreas/"+$(this).val(),method:"GET",dataType:"text"}).done(function(n){var t=JSON.parse(n);$("#selectArea").empty();$("#selectArea").append('<option value=""><\/option>');$.each(t,function(n,t){$("#selectArea").append('<option value="'+t.Value+'">'+t.Text+"<\/option>")})}).fail(function(){})});$(`input[name="Post.Premium"]`).click(function(){$("#postId").val($(this).data("postid"));$(".bd-example-modal-xl").modal("show");$("#option1").prop("checked",!0);$("#option2").prop("checked",!1)});$(".product-activate").on("click",function(){var n=JSON.parse(PostObject),t={productId:$(this).data("product")};$.ajax({url:`${domainUrl}/api/Order/${n.id}`,method:"POST",data:t}).done(function(){$(`input[name="Post.Premium"]`).attr({disabled:"disabled"});$("#option1").prop("checked",!1);$("#option2").prop("checked",!0);$(".bd-example-modal-xl").modal("hide");$(".premium-feature").removeAttr("disabled")}).fail(function(){$(".bd-example-modal-xl").modal("show");toastr.error("Κάτι πήγε στραβά. Θα το κοιτάξουμε αμέσως.");$(`input[name="Post.Premium"]`).removeAttr("disabled");$("#option1").prop("checked",!0);$("#option2").prop("checked",!1)})});t=JSON.parse(PostObject);$('#inp_Category option[value="'+t.SaleCategory+'"]').attr("selected","selected");$('#selectType option[value="'+t.TypeId+'"]').attr("selected","selected");s();h();$("#selectType").change();$(".material-tooltip-main").tooltip({template:'<div class="tooltip md-tooltip"><div class="tooltip-arrow md-arrow"><\/div><div class="tooltip-inner md-inner"><\/div><\/div>'});$(`input[data-activates="select-options-selectConstruction"]`).attr("required",!1);$(`input[data-activates="select-options-selectRennovation"]`).attr("required",!1)});var i={"Post.SaleCategory":{presence:!0},"Post.TypeId":{presence:!0},"Post.SubTypeId":{presence:!0},"Post.PriceTotal":{presence:!1,length:{minimum:3,maximum:20,message:n.moreThan100},format:{pattern:"[0-9]+",flags:"i",message:n.onlyInteger}},"Post.Area":{presence:!0},"Post.SubAreaId":{presence:!0},"Post.Address":{presence:!1,length:{minimum:3,message:n.minimumThreeCharacters}},"Post.Square":{presence:!0},"Post.PostalCode":{presence:!1,format:{pattern:"\\d{5}",message:n.maximumCharacters5}}}})();