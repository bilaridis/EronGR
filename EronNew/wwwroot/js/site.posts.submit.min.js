(function(){function u(n){var r=validate(n,t,{fullMessages:!1});i(n,r||{});r||s()}function i(n,t){_.each(n.querySelectorAll("input[name], select[name]"),function(n){f(n,t&&t[n.name])})}function f(n,t){var i=r(n.parentNode,"form-group");i!=null&&(messages=i.querySelector(".messages"),e(i),t?(i.classList.add("has-error"),_.each(t,function(n){o(messages,`${n}`)})):i.classList.add("has-success"))}function r(n,t){return!n||n==document?null:n.classList.contains(t)?n:r(n.parentNode,t)}function e(n){n.classList.remove("has-error");n.classList.remove("has-success");_.each(n.querySelectorAll(".help-block.error"),function(n){n.parentNode.removeChild(n)})}function o(n,t){var i=document.createElement("p");i.classList.add("help-block");i.classList.add("error");i.classList.add("text-danger");i.innerText=t;n.appendChild(i)}function s(){var n=$("form#main").serialize();$.ajax({type:"POST",url:window.location.href,data:n,success:function(){window.location.href=domainUrl+"/Administration/#1"},failed:function(){window.location.href=domainUrl+"/Administration/#2"}});window.location.href=domainUrl+"/Administration/#3"}const n=JSON.parse(textLocalised);$(function(){function o(){$.ajax({url:domainUrl+"/api/GetAreas/0",method:"GET",dataType:"text"}).done(function(n){var t=JSON.parse(n);$("#selectParentArea").materialSelect("destroy");$("#selectParentArea").empty();$.each(t,function(n,t){var i=t.Value==r.Area?"selected":"";$("#selectParentArea").append('<option value="'+t.Value+'" '+i+">"+t.Text+"<\/option>")});$("#selectParentArea").materialSelect()}).fail(function(){})}function s(){var n=JSON.parse(PostObject);$.ajax({url:domainUrl+"/api/GetAreas/"+n.Area,method:"GET",dataType:"text"}).done(function(t){var i=JSON.parse(t);$("#selectArea").materialSelect("destroy");$("#selectArea").empty();$.each(i,function(t,i){var r=i.Value==n.SubAreaId?"selected":"";$("#selectArea").append('<option value="'+i.Value+'" '+r+">"+i.Text+"<\/option>")});$("#selectArea").materialSelect()}).fail(function(){})}var f,e,r;$(".stepper").mdbStepper();$(".next-step").on("click",function(n){var r=document.querySelector("form#main"),u;n.preventDefault();u=validate(r,t,{fullMessages:!1});i(r,u||{})});validate.validators.presence.options={message:function(){return n.obligatory}};f=document.querySelector("form#main");$(".btn-outline-success").on("click",function(n){n.preventDefault();u(f)});$("#uploader").length>0&&(e=new qq.FineUploader({element:document.getElementById("uploader"),request:{endpoint:"/Posts/Submit/Upload/"+$("#Post_id").val()},validation:{allowedExtensions:["jpeg","jpg","png"],itemLimit:21,sizeLimit:5242880},session:{endpoint:"/Posts/Submit/GetUploads/"+$("#Post_id").val()},deleteFile:{enabled:!0,forceConfirm:!0,endpoint:"/Posts/Submit/DeletePhoto"},autoUpload:!0,debug:!1}));$(`label[data-value="${$("#Energy").val()}"]`).addClass("btn-outline-info");$(".efficiency").click(function(){$(".energyEfficiency").find("label").removeClass("btn-outline-info");$("#Energy").val($(this).data("value"));$(this).addClass("btn-outline-info")});$("#selectType").change(function(){var n=JSON.parse(PostObject);$.ajax({url:domainUrl+"/api/Types/"+$(this).find(":selected").val(),method:"GET",dataType:"text"}).done(function(t){var i=JSON.parse(t);$("#selectSubType").materialSelect("destroy");$("#selectSubType").empty();$("#selectSubType").append('<option value=""><\/option>');$.each(i,function(t,i){var r=i.Value==n.SubTypeId?"selected":"";$("#selectSubType").append('<option value="'+i.Value+'" '+r+">"+i.Text+"<\/option>")});$("#selectSubType").materialSelect()}).fail(function(){})});$("#selectParentArea").change(function(){$.ajax({url:domainUrl+"/api/GetAreas/"+$(this).val(),method:"GET",dataType:"text"}).done(function(n){var t=JSON.parse(n);$("#selectArea").empty();$("#selectArea").append('<option value=""><\/option>');$.each(t,function(n,t){$("#selectArea").append('<option value="'+t.Value+'">'+t.Text+"<\/option>")});$("#selectArea").materialSelect("destroy")}).fail(function(){})});$("#toggle_Premium").change(function(){$(this).is(":checked")&&($("#postId").val($(this).data("postid")),$(".bd-example-modal-xl").modal("show"),$("#toggle_Premium").prop("checked",!1))});$(".product-activate").on("click",function(){var n=JSON.parse(PostObject),t={productId:$(this).data("product")};$.ajax({url:`${domainUrl}/api/Order/${n.id}`,method:"POST",data:t}).done(function(){$(`#toggle_Premium`).attr({disabled:"disabled"});$("#toggle_Premium").prop("checked",!0);$(".bd-example-modal-xl").modal("hide");$("#Post_Premium").val("True");$(".premium-feature").removeAttr("disabled");toastr.success("Ενεργοποιήθηκε επιτυχώς η αγγελία με τα Premium Χαρακτηριστικά.")}).fail(function(){$(".bd-example-modal-xl").modal("show");toastr.error("Κάτι πήγε στραβά. Θα το κοιτάξουμε αμέσως.");$(`#toggle_Premium`).removeAttr("disabled");$("#toggle_Premium").prop("checked",!1);$("#Post_Premium").val("False")})});r=JSON.parse(PostObject);$('#inp_Category option[value="'+r.SaleCategory+'"]').attr("selected","selected");$('#selectType option[value="'+r.TypeId+'"]').attr("selected","selected");o();s();$("#selectType").change();$(".material-tooltip-main").tooltip({template:'<div class="tooltip md-tooltip"><div class="tooltip-arrow md-arrow"><\/div><div class="tooltip-inner md-inner"><\/div><\/div>'});$(`input[data-activates="select-options-selectConstruction"]`).attr("required",!1);$(`input[data-activates="select-options-selectRennovation"]`).attr("required",!1)});var t={"Post.SaleCategory":{presence:!0},"Post.TypeId":{presence:!0},"Post.SubTypeId":{presence:!0},"Post.PriceTotal":{presence:!1,length:{minimum:3,maximum:20,message:n.moreThan100},format:{pattern:"[0-9]+",flags:"i",message:n.onlyInteger}},"Post.Area":{presence:!0},"Post.SubAreaId":{presence:!0},"Post.Address":{presence:!1,length:{minimum:3,message:n.minimumThreeCharacters}},"Post.Square":{presence:!0},"Post.PostalCode":{presence:!1,format:{pattern:"\\d{5}",message:n.maximumCharacters5}}};validate.extend(validate.validators.datetime,{parse:function(n){return+moment.utc(n)},format:function(n,t){var i=t.dateOnly?"YYYY-MM-DD":"YYYY-MM-DD hh:mm:ss";return moment.utc(n).format(i)}})})();