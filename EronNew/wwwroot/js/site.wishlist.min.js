(function(){function t(n){var t=$("form").serialize();$.ajax({type:"POST",url:n,data:t}).done(function(n){var t=JSON.parse(n);r(t);$(".details-heart").unbind("click");$(".details-heart").click(function(n){var t=$(this).data("postid");$(this).hasClass("details-wish")?$.ajax({url:domainUrl+"/Posts/Details/WishList/"+t,method:"GET",dataType:"text"}).done(function(){$(`.details-heart[data-postid="${t}"]`).removeClass("details-wish").addClass("details-unwish");$(`.details-heart[data-postid="${t}"]`).find(".fa-heart").removeClass("far").addClass("fas")}).fail(function(n){n.status==401&&(window.location.href=domainUrl+"/Identity/Account/Login?ReturnUrl=%2FHome%2FSearch%2F")}):$.ajax({url:domainUrl+"/Posts/Details/UnWishList/"+t,method:"GET",dataType:"text"}).done(function(){$(`.details-heart[data-postid="${t}"]`).removeClass("details-unwish").addClass("details-wish");$(`.details-heart[data-postid="${t}"]`).find(".fa-heart").removeClass("fas").addClass("far")}).fail(function(){});n.preventDefault()})}).fail(function(){console.log("error");$("#loader").css("display","none");r([])})}function r(n){const t=n.length===0?``:n.map(n=>u(n)).join("\n");$("#products").append(t)}function u(n){return`
<div class="col-sm-12 col-md-3 mb-3">
    <div class="card promoting-card m-2">
        <a href="/Posts/Details/${n.Id}">
            <div class="d-flex flex-row m-1" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                <label class="form-check-label font-weight-bold mb-0 mr-0" data-toggle="tooltip" title="${n.Title||""}" ><span class="badge badge-primary text-wrap">${$.i18n(n.Category)}</span> > ${n.Title||""} ${n.Premium}</label>
            </div>
        </a>
        <div class="view overlay z-depth-1">
            <img class="card-img-top rounded-0" src="${n.UrlImage||"/images/DefaultImage1.jpg"}" alt="Card image cap">
            <a href="/Posts/Details/${n.Id}">
                <div class="mask img-gradient">
                    <span class="text-default btn-sm" style="position: absolute; top: 0px; left: 0px;">
                        # ${n.Id}
                    </span>
                    <span class="form-check-label px-2 rounded mdb-color white-text" style="position: absolute; bottom: 10px; right: 10px;">
                        ${moment(n.CreatedDate).format("L")} <i class="fas fa-clock"></i>
                    </span>
                </div>
            </a>
        </div>
        <div class="card-body d-flex px-2 py-1 form-check-label">
            <span class="p-0 pt-2">
                ${n.CurrencyConvertedLocal} - ${formatMoney(n.Square,0,",",".")||""}  <b>m<sup>2</sup></b> - ${n.ConstructionYear||""} <i class="fas fa-home"></i>
            </span>
            <a type="button" href="#!" data-postid="${n.Id}" class="details-heart ${n.WishList==!0?"details-unwish":"details-wish"} btn-sm ml-auto pb-0 justify-content-end">
                <i class="${n.WishList==!0?"fas":"far"} fa-heart fa-1x pink-text"></i>
            </a>
        </div>
    </div>
</div> `}const n="/WishList/Query";$(function(){$("#loader").css("display","none");$("#sort").change(i=>{i.stopImmediatePropagation(),$("#products").empty(),$("#numberOfPage").val("1"),t(n)});$(".filter-option").change(()=>{$("#products").empty(),t(n)});t(n)});var i=document.querySelector("#infinite-list");i.addEventListener("scroll",function(){if(i.scrollTop+i.clientHeight>=i.scrollHeight){let i=parseInt($("#numberOfPage").val())+1;$("#numberOfPage").val(i);t(n);console.log("Bottom - Time to refresh")}})})();